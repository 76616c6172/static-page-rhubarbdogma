<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cluton Map</title>
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 0;
        }
        .header-link {
            font-family: "Times New Roman", serif;
            font-size: 1.5rem;
            text-decoration: none;
            color: inherit;
        }
        .header-link:hover {
            text-decoration: underline;
        }
        .header {
            position: absolute;
            top: 0;
            left: 0;
            margin: 1rem;
        }
        .image-container {
            position: relative;
            transform: scale(1.3);
            transform-origin: center center;
        }
        img {
            display: block;
        }
        .highlight-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }
    </style>
</head>
<body>
    <header class="header">
        <a href="/" class="header-link">rhubarb dogma</a>
    </header>
    <!--CLUTON 1 to 2-->
    <div class="image-container">
        <img src="cluton map/cluton main.jpg" usemap="#image-map" alt="Cluton Map">
        <map name="image-map">
            <area target="_self" alt="Cluton Map" title="Cluton Map" href="http://localhost:8000/ytc%20image%20maps/cluton%20map/cluton%20crater.jpg" coords="228,244,210,238,197,234,186,231,174,226,162,217,148,218,135,218,118,216,101,216,86,221,71,230,66,245,69,253,77,264,81,276,87,286,97,296,110,304,117,313,128,321,138,330,154,336,164,341,174,348,181,355,194,357,208,360,220,364,234,365,247,366,262,368,275,369,286,373,297,378,305,381,312,377,321,374,329,375,337,376,346,376,356,372,362,371,374,368,384,361,389,354,391,342,390,332,386,322,379,312,370,305,359,296,339,286,322,282,309,277,300,269,280,264,271,264,265,257,254,256,237,252" shape="poly">
        </map>
    </div>

    <script>
        function createPolygonPath(coords) {
            const points = coords.split(',').map(Number);
            let path = '';
            for (let i = 0; i < points.length; i += 2) {
                path += `${points[i]},${points[i + 1]} `;
            }
            return path.trim();
        }

        function createHighlight(area) {
            const container = document.querySelector('.image-container');
            const img = container.querySelector('img');

            // Create a container for all SVG highlights if it doesn't exist
            let highlightContainer = container.querySelector('.highlight-container');
            if (!highlightContainer) {
                highlightContainer = document.createElement('div');
                highlightContainer.className = 'highlight-container';
                container.appendChild(highlightContainer);
            }

            const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
            svg.style.position = 'absolute';
            svg.style.top = '0';
            svg.style.left = '0';
            svg.style.width = '100%';
            svg.style.height = '100%';
            svg.setAttribute('viewBox', `0 0 ${img.naturalWidth} ${img.naturalHeight}`);
            svg.style.pointerEvents = 'none';

            const polygon = document.createElementNS('http://www.w3.org/2000/svg', 'polygon');
            polygon.setAttribute('points', createPolygonPath(area.coords));
            polygon.setAttribute('fill', 'none');

            svg.appendChild(polygon);
            highlightContainer.appendChild(svg);

            // Associate polygon with its area element
            area.polygonEl = polygon;
        }

        // Wait for the image to load before creating highlights and adding event listeners
        window.addEventListener('load', () => {
            const areas = document.querySelectorAll('area');
            areas.forEach(area => {
                createHighlight(area);

                area.addEventListener('mouseenter', () => {
                    if (area.polygonEl) {
                        area.polygonEl.setAttribute('stroke', 'rgba(105, 105, 105, 0.5)');
                        area.polygonEl.setAttribute('stroke-width', '2');
                        area.polygonEl.style.filter = 'drop-shadow(0 0 20px dimgrey)';
                    }
                });

                area.addEventListener('mouseleave', () => {
                    if (area.polygonEl) {
                        area.polygonEl.removeAttribute('stroke');
                        area.polygonEl.removeAttribute('stroke-width');
                        area.polygonEl.style.filter = 'none';
                    }
                });
            });
        });
    </script>
</body>
</html>