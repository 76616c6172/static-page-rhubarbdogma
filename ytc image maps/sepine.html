<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sepine</title>
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 0;
        }
        .header-link {
            font-family: "Times New Roman", serif;
            font-size: 1.5rem;
            text-decoration: none;
            color: inherit;
        }
        .header-link:hover {
            text-decoration: underline;
        }
        .header {
            position: absolute;
            top: 0;
            left: 0;
            margin: 1rem;
        }
        .image-container {
            position: relative;
            transform: scale(1.3);
            transform-origin: center center;
        }
        img {
            display: block;
        }
        .highlight-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }
    </style>
</head>
<body>
    <header class="header">
        <a href="/" class="header-link">rhubarb dogma</a>
    </header>
    <div class="image-container">
        <img src="sepine map//sepine-parent.jpg" usemap="#image-map" alt="Sepine Map">
        <map name="image-map">
            <area target="_self" alt="Caves" href="sepine map//sepine-caves.jpg" coords="653,162,660,140,676,125,690,109,702,101,719,100,734,104,747,110,757,124,765,147,772,164,768,180,761,198,758,218,763,240,771,256,774,283,778,312,774,328,762,314,759,300,764,288,766,279,764,270,755,258,742,239,737,224,740,216,743,202,737,194,740,185,735,177,729,171,715,181,705,184,694,183,680,173,687,174,670,173" shape="poly">
            <area target="_self" alt="Fungi Forest" href="sepine map//sepine-forest.jpg" coords="232,173,226,134,216,150,203,150,186,147,184,132,187,119,178,121,162,102,170,119,151,114,154,121,129,133,108,163,133,143,121,167,118,185,124,177,120,199,130,214,138,199,142,191,149,201,158,206,152,189,161,192,157,181,164,185,164,178,173,182,177,172,182,179,180,194,174,202,184,202,195,207,189,214,181,229,171,233,181,237,163,245,187,242,190,248,177,250,162,257,153,265,165,264,153,275,143,287,160,282,157,297,169,298,172,305,193,289,180,274,185,260,198,245,211,245,211,219,217,207,228,197,222,190,229,183" shape="poly">
            <area target="_self" alt="Shoreline" href="sepine map//sepine-shore.jpg" coords="456,240,408,216,362,234,360,240,380,252,390,266,395,269,439,260,470,253,509,257,489,238,481,237" shape="poly">
        </map>
    </div>

    <script>
        function createPolygonPath(coords) {
            const points = coords.split(',').map(Number);
            let path = '';
            for (let i = 0; i < points.length; i += 2) {
                path += `${points[i]},${points[i + 1]} `;
            }
            return path.trim();
        }

        function createHighlight(area) {
            const container = document.querySelector('.image-container');
            const img = container.querySelector('img');

            // Create a container for all SVG highlights if it doesn't exist
            let highlightContainer = container.querySelector('.highlight-container');
            if (!highlightContainer) {
                highlightContainer = document.createElement('div');
                highlightContainer.className = 'highlight-container';
                container.appendChild(highlightContainer);
            }

            const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
            svg.style.position = 'absolute';
            svg.style.top = '0';
            svg.style.left = '0';
            svg.style.width = '100%';
            svg.style.height = '100%';
            svg.setAttribute('viewBox', `0 0 ${img.naturalWidth} ${img.naturalHeight}`);
            svg.style.pointerEvents = 'none';

            const polygon = document.createElementNS('http://www.w3.org/2000/svg', 'polygon');
            polygon.setAttribute('points', createPolygonPath(area.coords));
            polygon.setAttribute('fill', 'none');

            svg.appendChild(polygon);
            highlightContainer.appendChild(svg);

            // Associate polygon with its area element
            area.polygonEl = polygon;
        }

        // Wait for the image to load before creating highlights and adding event listeners
        window.addEventListener('load', () => {
            const areas = document.querySelectorAll('area');
            areas.forEach(area => {
                createHighlight(area); // Creates the polygon structure, now initially invisible

                area.addEventListener('mouseenter', () => {
                    if (area.polygonEl) {
                        area.polygonEl.setAttribute('stroke', 'rgba(105, 105, 105, 0.5)');
                        area.polygonEl.setAttribute('stroke-width', '2');
                        area.polygonEl.style.filter = 'drop-shadow(0 0 20px dimgrey)';
                    }
                });

                area.addEventListener('mouseleave', () => {
                    if (area.polygonEl) {
                        area.polygonEl.removeAttribute('stroke');
                        area.polygonEl.removeAttribute('stroke-width');
                        area.polygonEl.style.filter = 'none';
                    }
                });
            });
        });
    </script>
</body>
</html>
